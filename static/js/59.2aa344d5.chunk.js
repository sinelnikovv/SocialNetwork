"use strict";(self.webpackChunkproject1=self.webpackChunkproject1||[]).push([[59],{376:function(e,t,o){o.r(t),o.d(t,{default:function(){return te}});var n=o(9439),r=o(2791),i="Profile_addPhotoBtnDesktop__vNGcA",a="Profile_addPhotoBtnMobile__LyqS7",s=o(1413),l=o(9195),c=o(6727),u=o(4695),d=o(4554),x=o(5421),f=o(6151),h=o(9157),p=o(5661),m=o(5289),Z=o(890),b=o(9174),j=o(5523),g=o(4839),v=o(5758),w=o(1880),k=o(983),y=o(4668),S=o(3854),F=o(184),M=function(e){var t=c.Ry().shape({fullName:c.Z_("Name should be a string").min(2,"Name must have at least 2 letters")}),o=(0,l.cI)({defaultValues:{fullName:e.profile.fullName,aboutMe:e.profile.aboutMe,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,facebook:e.profile.contacts.facebook,github:e.profile.contacts.github,instagram:e.profile.contacts.instagram,mainLink:e.profile.contacts.mainLink,twitter:e.profile.contacts.twitter,vk:e.profile.contacts.vk,website:e.profile.contacts.website,youtube:e.profile.contacts.youtube},resolver:(0,u.X)(t)}),n=o.register,i=o.handleSubmit,a=o.formState.errors,M=r.useRef(null);return r.useEffect((function(){if(e.isFormModalOpen){var t=M.current;null!==t&&t.focus()}}),[e.isFormModalOpen]),(0,F.jsxs)(m.Z,{open:e.isFormModalOpen,onClose:e.handleCloseFormModal,scroll:"paper",children:[(0,F.jsx)(p.Z,{id:"scroll-dialog-title",children:"Change profile"}),(0,F.jsx)(h.Z,{dividers:!0,children:(0,F.jsx)("form",{onSubmit:i(e.onSubmit),children:(0,F.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,F.jsxs)(d.Z,{children:[(0,F.jsx)(x.Z,(0,s.Z)((0,s.Z)({sx:{mb:1,p:0},id:"fullName",variant:"outlined",label:"Your name",name:"fullName"},n("fullName")),{},{required:!0,error:a.fullName})),a.fullName?(0,F.jsx)(Z.Z,{variant:"body2",component:"p",children:a.fullName.message}):(0,F.jsx)(F.Fragment,{})]}),(0,F.jsx)(d.Z,{children:(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"aboutMe",variant:"outlined",label:"About me",name:"aboutMe"},n("aboutMe")))}),(0,F.jsx)(j.Z,{sx:{m:0},labelPlacement:"start",control:(0,F.jsx)(b.Z,(0,s.Z)((0,s.Z)({},n("lookingForAJob")),{},{name:"lookingForAJob",id:"lookingForAJob"})),label:"Looking For a job:"}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"lookingForAJobDescription",variant:"outlined",label:"My skills",name:"lookingForAJobDescription"},n("lookingForAJobDescription"))),(0,F.jsx)(Z.Z,{sx:{my:2},children:"My contacts:"}),(0,F.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(g.Z,{fontSize:"large",sx:{color:"action.active",mr:1,my:.5}}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"facebook",variant:"outlined",label:"Facebook",name:"facebook"},n("facebook")))]}),(0,F.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(v.Z,{fontSize:"large",sx:{color:"action.active",mr:1,my:.5}}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"github",variant:"outlined",label:"Github",name:"github"},n("github")))]}),(0,F.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(w.Z,{fontSize:"large",sx:{color:"action.active",mr:1,my:.5}}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"instagram",variant:"outlined",label:"Instagram",name:"instagram"},n("instagram")))]}),(0,F.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(y.Z,{fontSize:"large",sx:{color:"action.active",mr:1,my:.5}}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"twitter",variant:"outlined",label:"Twitter",name:"twitter"},n("twitter")))]}),(0,F.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(k.Z,{fontSize:"large",sx:{color:"action.active",mr:1,my:.5}}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"mainLink",variant:"outlined",label:"Main link",name:"mainLink"},n("mainLink")))]}),(0,F.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(k.Z,{fontSize:"large",sx:{color:"action.active",mr:1,my:.5}}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"website",variant:"outlined",label:"Website",name:"website"},n("website")))]}),(0,F.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(S.Z,{fontSize:"large",sx:{color:"action.active",mr:1,my:.5}}),(0,F.jsx)(x.Z,(0,s.Z)({sx:{mb:1,p:0},id:"youtube",variant:"outlined",label:"Youtube",name:"youtube"},n("youtube")))]}),(0,F.jsx)(f.Z,{type:"submit",variant:"outlined",children:"Save"})]})})})]})},C=o(4721),A=o(3400),L=o(1039),I=o(3058),z=o(3768),N=o(8980),O=o(4165),P=o(5861),R=o(2733),T=function(e){var t=(0,R.MY)(e.userId).data,o=(0,R.Aj)(),i=(0,n.Z)(o,1)[0],a=(0,r.useState)(!1),s=(0,n.Z)(a,2),l=s[0],c=s[1],u=(0,r.useState)(),h=(0,n.Z)(u,2),p=h[0],m=h[1],b=function(){var e=(0,P.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({status:p}).unwrap();case 2:c(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)(d.Z,{sx:{my:1},children:[!l&&(0,F.jsxs)(d.Z,{children:[(0,F.jsx)(Z.Z,{sx:{my:1,p:0},children:t||"No status"}),e.isOwner&&(0,F.jsx)(f.Z,{size:"small",variant:"outlined",onClick:function(){e.isOwner&&(c(!0),m(t))},children:"Edit status"})]}),l&&(0,F.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,F.jsx)(x.Z,{sx:{mb:1,p:0},value:p,onChange:function(e){m(e.currentTarget.value)},id:"standard-basic",variant:"filled",label:"Status"}),(0,F.jsx)(f.Z,{sx:{alignSelf:"flex-start"},size:"small",variant:"outlined",onClick:b,children:"Save status"})]})]})},D=function(e){return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(d.Z,{sx:{mt:1},children:[(0,F.jsx)(Z.Z,{variant:"h5",component:"h4",children:e.profile.fullName}),(0,F.jsx)(C.Z,{}),(0,F.jsx)(T,{isOwner:e.isOwner,userId:e.profile.userId}),(0,F.jsx)(C.Z,{}),(0,F.jsxs)(d.Z,{sx:{my:2},children:[(0,F.jsxs)(Z.Z,{children:["About me: ",e.profile.aboutMe]}),(0,F.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,F.jsx)(Z.Z,{children:"Looking for a job:"}),e.profile.lookingForAJob?(0,F.jsx)(L.Z,{}):(0,F.jsx)(I.Z,{})]}),(0,F.jsx)(d.Z,{children:(0,F.jsxs)(Z.Z,{children:["Skills: ",e.profile.lookingForAJobDescription]})}),Object.values(e.profile.contacts).some((function(e){return null!==e}))&&(0,F.jsxs)(d.Z,{children:[(0,F.jsx)(Z.Z,{children:"My contacts:"}),(0,F.jsxs)(d.Z,{children:[e.profile.contacts.facebook&&(0,F.jsx)(z.Z,{title:e.profile.contacts.facebook,arrow:!0,TransitionComponent:N.Z,children:(0,F.jsx)(A.Z,{href:e.profile.contacts.facebook,color:"primary",children:(0,F.jsx)(g.Z,{fontSize:"large"})})}),e.profile.contacts.github&&(0,F.jsx)(z.Z,{title:e.profile.contacts.github,arrow:!0,TransitionComponent:N.Z,children:(0,F.jsx)(A.Z,{href:e.profile.contacts.github,color:"primary",children:(0,F.jsx)(v.Z,{fontSize:"large"})})}),e.profile.contacts.instagram&&(0,F.jsx)(z.Z,{title:e.profile.contacts.instagram,arrow:!0,TransitionComponent:N.Z,children:(0,F.jsx)(A.Z,{href:e.profile.contacts.instagram,color:"primary",children:(0,F.jsx)(w.Z,{fontSize:"large"})})}),e.profile.contacts.twitter&&(0,F.jsx)(z.Z,{title:e.profile.contacts.twitter,arrow:!0,TransitionComponent:N.Z,children:(0,F.jsx)(A.Z,{href:e.profile.contacts.twitter,color:"primary",children:(0,F.jsx)(y.Z,{fontSize:"large"})})}),e.profile.contacts.mainLink&&(0,F.jsx)(z.Z,{title:e.profile.contacts.mainLink,arrow:!0,TransitionComponent:N.Z,children:(0,F.jsx)(A.Z,{href:e.profile.contacts.mainLink,color:"primary",children:(0,F.jsx)(k.Z,{fontSize:"large"})})}),e.profile.contacts.website&&(0,F.jsx)(z.Z,{title:e.profile.contacts.website,arrow:!0,TransitionComponent:N.Z,children:(0,F.jsx)(A.Z,{href:e.profile.contacts.website,color:"primary",children:(0,F.jsx)(k.Z,{fontSize:"large"})})}),e.profile.contacts.youtube&&(0,F.jsx)(z.Z,{title:e.profile.contacts.youtube,arrow:!0,TransitionComponent:N.Z,children:(0,F.jsx)(A.Z,{href:e.profile.contacts.youtube,color:"primary",children:(0,F.jsx)(S.Z,{fontSize:"large"})})})]})]}),e.isOwner&&(0,F.jsx)(f.Z,{variant:"outlined",onClick:e.goToEditMode,children:"Edit profile"})]})]})})},J=o(2026),E=o(7689),U=o(2541),_=o(5645),B=o(3044),G=o(8595),H=o(7831),W=(o(5168),o(9768)),Y=o(5419),q=Math.PI/180;function V(e,t,o){return Q.apply(this,arguments)}function Q(){return Q=(0,P.Z)((0,O.Z)().mark((function e(t,o,n){var r,i,a,s,l,c,u,d,x,f,h,p=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>3&&void 0!==p[3]?p[3]:1,i=p.length>4&&void 0!==p[4]?p[4]:0,a=o.getContext("2d")){e.next=5;break}throw new Error("No 2d context");case 5:s=t.naturalWidth/t.width,l=t.naturalHeight/t.height,c=window.devicePixelRatio,o.width=Math.floor(n.width*s*c),o.height=Math.floor(n.height*l*c),a.scale(c,c),a.imageSmoothingQuality="high",u=n.x*s,d=n.y*l,x=i*q,f=t.naturalWidth/2,h=t.naturalHeight/2,a.save(),a.translate(-u,-d),a.translate(f,h),a.rotate(x),a.scale(r,r),a.translate(-f,-h),a.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,t.naturalWidth,t.naturalHeight),a.restore();case 25:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}o(9390);var X=o(2003),K=o(2739),$={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};var ee=function(e){var t,o,i,a=(0,H.uI)({maxFiles:1,accept:{"image/jpeg":[],"image/png":[]},onDrop:function(e){w(void 0);var t=new FileReader;t.addEventListener("load",(function(){var e;h((null===(e=t.result)||void 0===e?void 0:e.toString())||"")})),t.readAsDataURL(e[0])}}),l=a.getRootProps,c=a.getInputProps,u=(0,r.useState)(""),x=(0,n.Z)(u,2),f=x[0],h=x[1],p=(0,r.useRef)(null),m=(0,r.useRef)(null),b=(0,r.useRef)(""),j=(0,r.useState)(),g=(0,n.Z)(j,2),v=g[0],w=g[1],k=(0,r.useState)(),y=(0,n.Z)(k,2),S=y[0],M=y[1],C=(0,r.useState)(1),A=(0,n.Z)(C,2),L=A[0],I=A[1],z=(0,r.useState)(0),N=(0,n.Z)(z,2),R=N[0],T=(N[1],(0,r.useState)(1)),D=(0,n.Z)(T,2),J=D[0],E=(D[1],(0,r.useState)()),U=(0,n.Z)(E,2),_=U[0],B=U[1];t=(0,P.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==S&&void 0!==S&&S.width&&null!==S&&void 0!==S&&S.height&&m.current&&p.current&&(V(m.current,p.current,S,L,R),p.current.toBlob((function(e){if(!e)throw new Error("Failed to create blob");b.current&&URL.revokeObjectURL(b.current),b.current=URL.createObjectURL(e);var t=new File([e],"temporaryAvatar.png",{type:"image/png"});B((t.size/1024/1024).toFixed(2))})));case 1:case"end":return e.stop()}}),e)}))),o=100,i=[S,L,R],(0,r.useEffect)((function(){var e=setTimeout((function(){t.apply(void 0,i)}),o);return function(){clearTimeout(e)}}),i);return(0,F.jsx)(G.Z,{open:e.isPhotoModalOpen,onClose:e.handleClosePhotoModal,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",closeAfterTransition:!0,slots:{backdrop:K.Z},slotProps:{backdrop:{timeout:500}},children:(0,F.jsx)(X.Z,{in:e.isPhotoModalOpen,children:(0,F.jsxs)(d.Z,{sx:$,children:[(0,F.jsxs)("div",(0,s.Z)((0,s.Z)({},l()),{},{children:[(0,F.jsx)("input",(0,s.Z)({},c())),(0,F.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"}),(0,F.jsx)("em",{children:"(Only *.jpeg and *.png images will be accepted)"})]})),!!f&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y.ZP,{crop:v,onChange:function(e,t){return w(t)},onComplete:function(e){return M(e)},aspect:J,children:(0,F.jsx)("img",{ref:m,alt:"Crop me",src:f,style:{transform:"scale(".concat(L,")")},onLoad:function(e){if(J){var t=e.currentTarget,o=t.width,n=t.height;w(function(e,t,o){return(0,Y._H)((0,Y.YG)({unit:"%",width:90},o,e,t),e,t)}(o,n,J))}}})}),(0,F.jsx)(W.ZP,{"aria-label":"Scale",orientation:"vertical",getAriaValueText:function(e){I(e)},valueLabelDisplay:"auto",defaultValue:1,max:3,step:.1,sx:{height:300}})]}),!!S&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{children:(0,F.jsx)("canvas",{ref:p,style:{border:"1px solid black",objectFit:"contain",width:S.width,height:S.height}})}),(0,F.jsxs)(d.Z,{children:[(0,F.jsx)("button",{onClick:function(){if(!p.current)throw new Error("Crop canvas does not exist");p.current.toBlob((function(t){if(!t)throw new Error("Failed to create blob");b.current&&URL.revokeObjectURL(b.current),b.current=URL.createObjectURL(t);var o=new File([t],"newAvatar.png",{type:"image/png"});e.onPhotoSend(o),h(""),M(),e.handleClosePhotoModal()}))},children:"Send Crop"}),(0,F.jsxs)(Z.Z,{sx:[{color:"red"},_<4&&{color:"green"}],children:["Size must be smaller than 4MB, now ",_,"MB"]})]})]})]})})})},te=function(){var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),o=t[0],s=t[1],l=(0,r.useState)(!1),c=(0,n.Z)(l,2),u=c[0],x=c[1],h=function(){return x(!0)},p=(0,R.UE)(void 0,{selectFromResult:function(e){return{me:e.data.data}}}),m=(0,E.UO)().userId,Z=!1;m||(m=p.me.id),m===p.me.id&&(Z=!0);var b=(0,R.Mx)(m),j=(0,R.hS)(),g=(0,n.Z)(j,1)[0],v=(0,R.bx)(),w=(0,n.Z)(v,1)[0];return b.isError?(0,F.jsx)(U.default,{}):b.isLoading?(0,F.jsx)(J.Z,{}):b.data?(0,F.jsxs)(d.Z,{sx:{p:2,display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"center",md:"start"},flexGrow:"1"},children:[(0,F.jsxs)(d.Z,{sx:{position:"relative"},children:[(0,F.jsx)(B.Z,{alt:b.data.fullName,src:b.data.photos.large,variant:"square",sx:{width:{xs:260,sm:320},height:{xs:260,sm:320}}}),Z&&(0,F.jsx)(d.Z,{className:i,children:(0,F.jsx)(f.Z,{onClick:h,color:"info",variant:"outlined",startIcon:(0,F.jsx)(_.Z,{}),children:"Add photo"})}),Z&&(0,F.jsx)(d.Z,{className:a,children:(0,F.jsx)(A.Z,{color:"info",onClick:h,children:(0,F.jsx)(_.Z,{})})})]}),(0,F.jsxs)(d.Z,{sx:{alignSelf:"stretch",px:3,py:1,flexGrow:1},children:[(0,F.jsx)(D,{goToEditMode:function(){s(!0)},profile:b.data,isOwner:Z}),(0,F.jsx)(M,{profile:b.data,onSubmit:function(e){var t={fullName:e.fullName,aboutMe:e.aboutMe,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,contacts:{facebook:e.facebook,github:e.github,instagram:e.instagram,mainLink:e.mainLink,twitter:e.twitter,vk:e.vk,website:e.website,youtube:e.youtube}};g(t).unwrap(),s(!1)},isFormModalOpen:o,handleCloseFormModal:function(){return s(!1)}})]}),(0,F.jsx)(ee,{isPhotoModalOpen:u,handleClosePhotoModal:function(){return x(!1)},onPhotoSend:function(e){return w(e)}})]}):null}},2026:function(e,t,o){var n=o(9439),r=o(2791),i=o(2739),a=o(3239),s=o(184);t.Z=function(){var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),o=t[0],l=t[1];return(0,r.useEffect)((function(){var e=setTimeout((function(){return l(!0)}),1e3);return function(){clearTimeout(e)}}),[]),(0,s.jsx)(i.Z,{open:o,sx:{color:"#eee",zIndex:100,position:"absolute",top:"0",bottom:"0",left:"0",right:"0"},children:(0,s.jsx)(a.Z,{size:68,sx:{position:"absolute"}})})}}}]);
//# sourceMappingURL=59.2aa344d5.chunk.js.map